classDiagram
    %% Interfaces (Principio DIP)
    class IReportGenerator {
        <<interface>>
        +generate(data: dict) Report
    }
  
    class IFormatStrategy {
        <<interface>>
        +format(content: str) str
    }
  
    class IDeliveryStrategy {
        <<interface>>
        +deliver(report: str, metadata: dict) bool
    }
  
    %% Generadores de Reportes (Principio SRP)
    class SalesReportGenerator {
        -report_type: str
        +generate(data: dict) Report
        -calculate_totals(sales: list) float
        -format_sales_detail(sales: list) str
    }
  
    class InventoryReportGenerator {
        -report_type: str
        +generate(data: dict) Report
        -calculate_totals(items: list) int
        -group_by_category(items: list) dict
    }
  
    class FinancialReportGenerator {
        -report_type: str
        +generate(data: dict) Report
        -calculate_balance(income: float, expenses: float) float
    }
  
    %% Estrategias de Formato (Patr贸n Strategy + OCP)
    class PDFFormatter {
        +format(content: str) str
    }
  
    class ExcelFormatter {
        +format(content: str) str
    }
  
    class HTMLFormatter {
        +format(content: str) str
    }
  
    %% Estrategias de Entrega (Patr贸n Strategy + OCP)
    class EmailDelivery {
        -smtp_config: dict
        +deliver(report: str, metadata: dict) bool
        -send_email(recipient: str, content: str) bool
    }
  
    class DownloadDelivery {
        -download_path: str
        +deliver(report: str, metadata: dict) bool
        -save_file(filename: str, content: str) bool
    }
  
    class CloudDelivery {
        -cloud_config: dict
        +deliver(report: str, metadata: dict) bool
        -upload_to_cloud(filename: str, content: str) bool
    }
  
    %% Factory (Patr贸n Factory)
    class ReportFactory {
        -generators: dict
        +create_generator(report_type: str) IReportGenerator
        +register_generator(type: str, generator: IReportGenerator)
    }
  
    %% Builder (Patr贸n Builder)
    class ReportBuilder {
        -generator: IReportGenerator
        -formatter: IFormatStrategy
        -delivery: IDeliveryStrategy
        -data: dict
        +set_generator(generator: IReportGenerator) ReportBuilder
        +set_formatter(formatter: IFormatStrategy) ReportBuilder
        +set_delivery(delivery: IDeliveryStrategy) ReportBuilder
        +set_data(data: dict) ReportBuilder
        +build() Report
    }
  
    %% Clase Principal
    class ReportSystem {
        -factory: ReportFactory
        -builder: ReportBuilder
        -report_history: list
        +generate_report(type: str, data: dict, format: str, delivery: str) Report
        +get_report_history() list
        -log_report(report: Report)
    }
  
    %% Modelo de Datos
    class Report {
        -content: str
        -type: str
        -format: str
        -timestamp: datetime
        -metadata: dict
        +get_content() str
        +get_metadata() dict
    }
  
    %% Relaciones
    IReportGenerator <|.. SalesReportGenerator
    IReportGenerator <|.. InventoryReportGenerator
    IReportGenerator <|.. FinancialReportGenerator
  
    IFormatStrategy <|.. PDFFormatter
    IFormatStrategy <|.. ExcelFormatter
    IFormatStrategy <|.. HTMLFormatter
  
    IDeliveryStrategy <|.. EmailDelivery
    IDeliveryStrategy <|.. DownloadDelivery
    IDeliveryStrategy <|.. CloudDelivery
  
    ReportFactory --> IReportGenerator : creates
    ReportBuilder --> IReportGenerator : uses
    ReportBuilder --> IFormatStrategy : uses
    ReportBuilder --> IDeliveryStrategy : uses
    ReportBuilder --> Report : builds
  
    ReportSystem --> ReportFactory : uses
    ReportSystem --> ReportBuilder : uses
    ReportSystem --> Report : manages